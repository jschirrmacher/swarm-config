#!/bin/bash
# Pre-push hook - additional checks before pushing to remote
# This hook runs automatically before every git push
#
# Checks performed:
# - Verify all tests pass
# - Ensure build succeeds (if configured)

set -e

echo "ğŸ” Pre-push checks..."

# Run tests if available
if grep -q '"test"' package.json 2>/dev/null; then
  echo "ğŸ§ª Running tests..."
  npm test || {
    echo "âŒ Tests failed!"
    echo "   Fix the failing tests before pushing."
    exit 1
  }
else
  echo "â­ï¸  No tests configured, skipping..."
fi

# Run build if available
if grep -q '"build"' package.json 2>/dev/null; then
  echo "ğŸ—ï¸  Running build..."
  npm run build || {
    echo "âŒ Build failed!"
    echo "   Fix the build errors before pushing."
    exit 1
  }
fi

echo "âœ… Pre-push checks passed"
exit 0
