#!/bin/bash
# Post-receive hook for swarm-config repository
# Automatically updates all project hooks when swarm-config is pushed

WORK_DIR="/var/apps/swarm-config"
GIT_BASE="${GIT_BASE:-~git/repos}"

echo "üîÑ Updating swarm-config hooks..."

cd "$WORK_DIR" || exit 1

# Pull latest changes
git pull

# Run hook setup
if [ -f "setup-hooks.sh" ]; then
  echo ""
  ./setup-hooks.sh "$GIT_BASE"
else
  echo "‚ö†Ô∏è  setup-hooks.sh not found"
fi

echo ""
echo "‚úÖ swarm-config hooks updated"
