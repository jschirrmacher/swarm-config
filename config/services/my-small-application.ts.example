import { createStack } from "../src/Service.js"
import { getDomain } from "../src/config-reader.js"

// Example: Application with separate backend API route
// This shows how to add multiple routes to the same service
// Domain is automatically read from .swarm-config
const domain = getDomain()
const appDomain = `my-small-application.${domain}`

export default createStack("my-small-application")
  .addService("node", 8080)
  .addRoute(appDomain)
  .addRoute(appDomain, {
    paths: ["/api"],        // listens on /api path
    strip_path: true,       // removes the /api prefix in the path
    name: "my-small-application-api", // as a second route, it needs a non-default route name
  })
